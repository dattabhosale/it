<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>LeapReplica - Electric Vehicles</title>
  <link rel="stylesheet" href="css/style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>

<body>
  <header class="site-header">
    <div class="container header-inner">
      <a href="/" class="brand">LeapReplica</a>
      <nav class="site-nav" id="site-nav">
        <a href="index.html">Home</a>
        <a href="products.html">Products</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
      </nav>
      <button class="nav-toggle" id="nav-toggle" aria-label="Toggle navigation">â˜°</button>
    </div>
  </header>

  <main>
    <section class="hero">
      <div class="container hero-inner">
        <div class="hero-copy">
          <h1>Electric mobility, designed for the future.</h1>
          <p>Explore a new generation of electric vehicles with long range, smart features, and bold design.</p>
          <p><a class="btn" href="products.html">View Models</a></p>
        </div>
        <div class="hero-media">
          <img src="assets/car-hero.jpg" alt="Electric car mockup">
        </div>
      </div>
    </section>

    <section class="highlights">
      <div class="container">
        <h2>Featured Models</h2>
        <div class="cards">
          <article class="card">
            <img src="assets/model-a.jpg" alt="Model A">
            <h3>Model A</h3>
            <p>Long range, fast charging, advanced driver assistance.</p>
            <p><a class="link" href="products.html">Learn more</a></p>
          </article>

          <article class="card">
            <img src="assets/model-b.jpg" alt="Model B">
            <h3>Model B</h3>
            <p>Urban performance with compact design and premium interior.</p>
            <p><a class="link" href="products.html">Learn more</a></p>
          </article>

          <article class="card">
            <img src="assets/model-c.jpg" alt="Model C">
            <h3>Model C</h3>
            <p>An intelligent SUV with family-friendly range and space.</p>
            <p><a class="link" href="products.html">Learn more</a></p>
          </article>
        </div>
      </div>
    </section>

    <section class="about-teaser">
      <div class="container">
        <h2>Our Vision</h2>
        <p>We build electric vehicles that are safe, sustainable and delightful to drive. Technology and design come
          together to make mobility more efficient and enjoyable.</p>
        <p><a class="btn ghost" href="about.html">Learn about us</a></p>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <div>Â© 2025 LeapReplica</div>
      <nav class="foot-nav">
        <a href="privacy.html">Privacy</a>
        <a href="contact.html">Contact</a>
      </nav>
    </div>
  </footer>
<script type='text/javascript'>
    function initEmbeddedMessaging() {
      try {
        embeddedservice_bootstrap.settings.language = 'es';
        embeddedservice_bootstrap.settings.displayHelpButton = true;
        embeddedservice_bootstrap.settings.defaultMinimizedText = "Chat with Leappy";
        embeddedservice_bootstrap.settings.disabledMinimizedText = "Leappy Offline";
        
        window.addEventListener("onEmbeddedMessagingReady", () => {
          embeddedservice_bootstrap.prechatAPI.setHiddenPrechatFields({
            Country: 'Spain',
            Language: 'es',
            CountryCode:'es'
          });
        });
        embeddedservice_bootstrap.init(
          '00DMA000003XnGM',
          'LPM_Leapmotor',
          'https://leapmotor--dev01.sandbox.my.site.com/ESWLPMLeapmotor1760706603231',
          {
            scrt2URL: 'https://leapmotor--dev01.sandbox.my.salesforce-scrt.com'
          }
        );
      } catch (err) {
        console.error('Error loading Embedded Messaging: ', err);
      }
    };
	(function () {
  console.log("Christmas Chat Button Initialized");
 
  // Christmas icon carousel - rotating festive symbols
  const christmasIcons = ['ðŸŽ„', 'ðŸŽ…', 'â›„', 'ðŸŽ', 'â„ï¸', 'ðŸ””', 'â­', 'ðŸ¤¶', 'ðŸ¦Œ', 'ðŸŽ€'];
  let currentIconIndex = 0;
  let iconInterval = null;
  let buttonObserver = null;
  function hideStandardButton(es) {
    if (es && es.utilAPI && typeof es.utilAPI.hideChatButton === "function") {
      try {
        es.utilAPI.hideChatButton();
      } catch (e) {
        console.warn("Error calling hideChatButton()", e);
      }
    }
    
    // Hide Salesforce buttons by selector
    try {
      const selectors = [
        '[id*="embedded-messaging"]:not(#xmas-chat-btn)',
        '[class*="embeddedMessaging"]:not(#xmas-chat-btn)',
        '[class*="slds-chat"]:not(#xmas-chat-btn)',
        '[class*="embeddedServiceHelpButton"]:not(#xmas-chat-btn)'
      ];
      
      selectors.forEach(selector => {
        try {
          document.querySelectorAll(selector).forEach(el => {
            if (el.id !== "xmas-chat-btn" && el.id !== "xmas-chat-styles") {
              el.style.cssText = "display: none !important; visibility: hidden !important; opacity: 0 !important;";
            }
          });
        } catch (e) {}
      });
    } catch (e) {
      console.warn("Error hiding buttons", e);
    }
  }
  function startIconCarousel(btn) {
    if (iconInterval) clearInterval(iconInterval);
    
    iconInterval = setInterval(() => {
      const icon = btn.querySelector('.chat-icon');
      if (!icon) return; // Safety check
      
      // Fade out
      icon.style.opacity = "0";
      icon.style.transform = "scale(0.5) rotate(180deg)";
      
      setTimeout(() => {
        currentIconIndex = (currentIconIndex + 1) % christmasIcons.length;
        icon.textContent = christmasIcons[currentIconIndex];
        
        // Fade in
        icon.style.opacity = "1";
        icon.style.transform = "scale(1) rotate(0deg)";
      }, 300);
    }, 3000); // Change icon every 3 seconds
  }
  function stopIconCarousel() {
    if (iconInterval) {
      clearInterval(iconInterval);
      iconInterval = null;
    }
  }
  function startButtonObserver(es) {
    if (buttonObserver) buttonObserver.disconnect();
    let throttle = null;
    buttonObserver = new MutationObserver(() => {
      if (!throttle) {
        throttle = setTimeout(() => {
          const customBtn = document.getElementById("xmas-chat-btn");
          if (customBtn && customBtn.style.display !== "none") {
            hideStandardButton(es);
          }
          throttle = null;
        }, 150);
      }
    });
    buttonObserver.observe(document.body, {
      childList: true,
      subtree: true,
      attributes: true,
      attributeFilter: ['style', 'class', 'display']
    });
  }
  function stopButtonObserver() {
    if (buttonObserver) {
      buttonObserver.disconnect();
      buttonObserver = null;
    }
  }
 
  function showCustomButton(es) {
    console.log("showCustomButton called", es ? "with ES" : "without ES");
    
    if (!es || !es.utilAPI) {
      console.warn("ES or utilAPI not available yet");
      // Still try to show button even without ES
    }
 
    let existing = document.getElementById("xmas-chat-btn");
    if (existing) {
      existing.style.display = "flex";
      console.log("Showing existing button");
      if (es) hideStandardButton(es);
      startIconCarousel(existing);
      if (es) startButtonObserver(es);
      return;
    }
 
    console.log("Creating new Christmas button");
    
    // Create button container
    const btn = document.createElement("button");
    btn.id = "xmas-chat-btn";
    btn.innerHTML = `
      <span class="chat-icon">${christmasIcons[0]}</span>
      <span class="chat-text">Chat with us!</span>
    `;
 
    // Styling
    Object.assign(btn.style, {
      position: "fixed",
      right: "20px",
      bottom: "20px",
      zIndex: "999999",
      minWidth: "220px",
      minHeight: "85px",
      padding: "0",
      border: "4px solid #FFD700",
      borderRadius: "50px",
      cursor: "pointer",
      display: "flex",
      flexDirection: "column",
      alignItems: "center",
      justifyContent: "center",
      gap: "8px",
      background: "linear-gradient(135deg, #dc2626 0%, #16a34a 50%, #dc2626 100%)",
      backgroundSize: "200% 200%",
      boxShadow: "0 12px 35px rgba(220, 38, 38, 0.6), 0 0 25px rgba(34, 197, 94, 0.4)",
      transition: "all 0.3s ease",
      fontFamily: "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",
      outline: "none",
      visibility: "visible",
      opacity: "1"
    });
    // Add styles
    if (!document.getElementById("xmas-chat-styles")) {
      const style = document.createElement("style");
      style.id = "xmas-chat-styles";
      style.textContent = `
        @keyframes xmasGlow {
          0%, 100% {
            box-shadow: 0 12px 35px rgba(220, 38, 38, 0.6), 0 0 25px rgba(34, 197, 94, 0.4);
            transform: scale(1);
          }
          50% {
            box-shadow: 0 18px 45px rgba(220, 38, 38, 0.8), 0 0 35px rgba(34, 197, 94, 0.6), 0 0 0 12px rgba(255, 215, 0, 0.25);
            transform: scale(1.03);
          }
        }
        
        @keyframes bgShift {
          0% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
          100% { background-position: 0% 50%; }
        }
        
        @keyframes slideInBounce {
          0% {
            transform: translateX(200%) rotate(20deg);
            opacity: 0;
          }
          60% {
            transform: translateX(-10px) rotate(-5deg);
            opacity: 1;
          }
          80% {
            transform: translateX(5px) rotate(2deg);
          }
          100% {
            transform: translateX(0) rotate(0deg);
            opacity: 1;
          }
        }
        
        @keyframes jingleBell {
          0%, 100% { transform: rotate(0deg); }
          10%, 30% { transform: rotate(-8deg); }
          20%, 40% { transform: rotate(8deg); }
          50% { transform: rotate(0deg); }
        }
        
        @keyframes snowfall {
          0% { transform: translateY(-5px); opacity: 0.8; }
          50% { transform: translateY(5px); opacity: 1; }
          100% { transform: translateY(-5px); opacity: 0.8; }
        }
        
        #xmas-chat-btn {
          animation: slideInBounce 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55), 
                     xmasGlow 3s ease-in-out 0.8s infinite, 
                     bgShift 8s ease 0.8s infinite;
        }
        
        #xmas-chat-btn .chat-icon {
          font-size: 42px;
          line-height: 1;
          transition: all 0.3s ease;
          animation: snowfall 2s ease-in-out infinite;
        }
        
        #xmas-chat-btn .chat-text {
          color: #ffffff;
          font-size: 16px;
          font-weight: 700;
          text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
          letter-spacing: 0.5px;
        }
        
        #xmas-chat-btn:hover {
          transform: scale(1.1) translateY(-5px) !important;
          box-shadow: 0 20px 50px rgba(220, 38, 38, 0.8), 0 0 40px rgba(34, 197, 94, 0.7) !important;
          animation: jingleBell 0.6s ease, xmasGlow 3s ease-in-out infinite, bgShift 8s ease infinite !important;
        }
        
        #xmas-chat-btn:hover .chat-icon {
          transform: scale(1.2) rotate(360deg);
          animation: none;
        }
        
        #xmas-chat-btn:active {
          transform: scale(0.95) !important;
        }
      `;
      document.head.appendChild(style);
    }
 
    btn.addEventListener("click", () => {
      stopIconCarousel();
      if (typeof es.utilAPI.launchChat === "function") {
        es.utilAPI.launchChat()
          .then(() => console.log("Chat launched"))
          .catch(err => console.error("Error launching chat", err));
      }
    });
 
    document.body.appendChild(btn);
    hideStandardButton(es);
    startIconCarousel(btn);
    startButtonObserver(es);
    console.log("Christmas chat button created");
  }
 
  function hideCustomButton() {
    const btn = document.getElementById("xmas-chat-btn");
    if (btn) {
      btn.style.display = "none";
      stopIconCarousel();
      stopButtonObserver();
    }
  }
 
  window.addEventListener("onEmbeddedMessagingButtonCreated", () => {
    const es = window.embeddedservice_bootstrap;
    if (es) showCustomButton(es);
  });
 
  window.addEventListener("onEmbeddedMessagingWindowMaximized", () => {
    hideCustomButton();
  });
 
  window.addEventListener("onEmbeddedMessagingWindowMinimized", () => {
    const es = window.embeddedservice_bootstrap;
    if (es) {
      hideStandardButton(es);
      showCustomButton(es);
    }
  });
 
  function waitForES(attempts, interval) {
    let count = 0;
    (function check() {
      count++;
      const es = window.embeddedservice_bootstrap;
      if (es && es.utilAPI) {
        showCustomButton(es);
        return;
      }
      if (count >= attempts) return;
      setTimeout(check, interval);
    })();
  }
 
  if (document.readyState === "complete" || document.readyState === "interactive") {
    waitForES(50, 200);
  } else {
    window.addEventListener("DOMContentLoaded", () => waitForES(50, 200));
  }
})();
  </script>
  <script type='text/javascript'
    src='https://leapmotor--dev01.sandbox.my.site.com/ESWLPMLeapmotor1760706603231/assets/js/bootstrap.min.js'
    onload='initEmbeddedMessaging()'></script>

</body>

</html>
