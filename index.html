<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>LeapReplica - Electric Vehicles</title>
  <link rel="stylesheet" href="css/style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>

<body>
  <header class="site-header">
    <div class="container header-inner">
      <a href="/" class="brand">LeapReplica</a>
      <nav class="site-nav" id="site-nav">
        <a href="index.html">Home</a>
        <a href="products.html">Products</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
      </nav>
      <button class="nav-toggle" id="nav-toggle" aria-label="Toggle navigation">‚ò∞</button>
    </div>
  </header>

  <main>
    <section class="hero">
      <div class="container hero-inner">
        <div class="hero-copy">
          <h1>Electric mobility, designed for the future.</h1>
          <p>Explore a new generation of electric vehicles with long range, smart features, and bold design.</p>
          <p><a class="btn" href="products.html">View Models</a></p>
        </div>
        <div class="hero-media">
          <img src="assets/car-hero.jpg" alt="Electric car mockup">
        </div>
      </div>
    </section>

    <section class="highlights">
      <div class="container">
        <h2>Featured Models</h2>
        <div class="cards">
          <article class="card">
            <img src="assets/model-a.jpg" alt="Model A">
            <h3>Model A</h3>
            <p>Long range, fast charging, advanced driver assistance.</p>
            <p><a class="link" href="products.html">Learn more</a></p>
          </article>

          <article class="card">
            <img src="assets/model-b.jpg" alt="Model B">
            <h3>Model B</h3>
            <p>Urban performance with compact design and premium interior.</p>
            <p><a class="link" href="products.html">Learn more</a></p>
          </article>

          <article class="card">
            <img src="assets/model-c.jpg" alt="Model C">
            <h3>Model C</h3>
            <p>An intelligent SUV with family-friendly range and space.</p>
            <p><a class="link" href="products.html">Learn more</a></p>
          </article>
        </div>
      </div>
    </section>

    <section class="about-teaser">
      <div class="container">
        <h2>Our Vision</h2>
        <p>We build electric vehicles that are safe, sustainable and delightful to drive. Technology and design come
          together to make mobility more efficient and enjoyable.</p>
        <p><a class="btn ghost" href="about.html">Learn about us</a></p>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <div>¬© 2025 LeapReplica</div>
      <nav class="foot-nav">
        <a href="privacy.html">Privacy</a>
        <a href="contact.html">Contact</a>
      </nav>
    </div>
  </footer>

  <script src="js/main.js"></script>
  <script type='text/javascript'>
    function initEmbeddedMessaging() {
      try {
        embeddedservice_bootstrap.settings.language = 'es';
        embeddedservice_bootstrap.settings.displayHelpButton = false;
        embeddedservice_bootstrap.settings.defaultMinimizedText = "Chat with Leappy";
        embeddedservice_bootstrap.settings.disabledMinimizedText = "Leappy Offline";
        
        window.addEventListener("onEmbeddedMessagingReady", () => {
          embeddedservice_bootstrap.prechatAPI.setHiddenPrechatFields({
            Country: 'Spain',
            Language: 'es',
            CountryCode:'es'
          });
        });
        
        embeddedservice_bootstrap.init(
          '00DMA000003XnGM',
          'LPM_Leapmotor',
          'https://leapmotor--dev01.sandbox.my.site.com/ESWLPMLeapmotor1760706603231',
          {
            scrt2URL: 'https://leapmotor--dev01.sandbox.my.salesforce-scrt.com'
          }
        );
      } catch (err) {
        console.error('Error loading Embedded Messaging: ', err);
      }
    };
	(function () {
  "use strict";
  console.log("üéÑ Christmas Round Chat Button - Ultra Protected");
 
  var carouselMessages = [
    "üéÑ Ho Ho Ho! Chat Now! üéÖ",
    "‚ùÑÔ∏è Merry Chatmas! ‚òÉÔ∏è",
    "üéÅ Get Support! üéÄ",
    "‚≠ê We're Here! ‚ú®",
    "üîî Chat with Us! üéÑ"
  ];
  var currentMessageIndex = 0;
  var carouselInterval = null;
  var customButton = null;
  var tooltip = null;
  var chatIsOpen = false;
  var buttonCreationAttempts = 0;
  var MAX_CREATION_ATTEMPTS = 3;
  // ULTRA AGGRESSIVE CSS - Inject immediately
  (function injectCSS() {
    var style = document.createElement("style");
    style.id = "christmas-chat-styles";
    style.textContent = `
      /* NUCLEAR OPTION - Hide ALL Salesforce buttons */
      .embeddedMessagingFrame,
      .embeddedMessagingConversationButton,
      .embeddedServiceHelpButton,
      .embeddedServiceSidebar,
      .helpButtonEnabled,
      .uiButton,
      button[aria-label*="Chat"],
      button[class*="embeddedMessaging"]:not(#leap-chat-cta),
      button[class*="embeddedService"]:not(#leap-chat-cta),
      div[class*="embeddedMessagingConversationButton"],
      div[class*="embeddedServiceHelpButton"],
      iframe[title*="chat" i]:not([title*="leappy" i]),
      [data-esw]:not(#leap-chat-cta) {
        display: none !important;
        visibility: hidden !important;
        opacity: 0 !important;
        pointer-events: none !important;
        position: absolute !important;
        left: -99999px !important;
        top: -99999px !important;
        width: 0 !important;
        height: 0 !important;
        z-index: -1 !important;
      }
      
      /* PROTECT our button at all costs */
      #leap-chat-cta-container {
        position: fixed !important;
        right: 24px !important;
        bottom: 24px !important;
        z-index: 2147483647 !important;
        pointer-events: auto !important;
      }
      
      #leap-chat-cta-container.chat-open {
        display: none !important;
      }
      
      #leap-chat-cta {
        width: 70px !important;
        height: 70px !important;
        border-radius: 50% !important;
        border: none !important;
        background: linear-gradient(135deg, #c41e3a 0%, #165b33 100%) !important;
        box-shadow: 0 8px 24px rgba(196, 30, 58, 0.5) !important;
        cursor: pointer !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
        position: relative !important;
        overflow: visible !important;
        padding: 0 !important;
      }
      
      #leap-chat-cta:hover {
        transform: scale(1.1) rotate(5deg) !important;
        box-shadow: 0 12px 32px rgba(196, 30, 58, 0.7) !important;
      }
      
      #leap-chat-cta:active {
        transform: scale(0.95) !important;
      }
      
      #leap-chat-cta svg {
        width: 32px !important;
        height: 32px !important;
      }
      
      #chat-tooltip {
        position: absolute !important;
        right: 85px !important;
        top: 50% !important;
        transform: translateY(-50%) !important;
        background: linear-gradient(135deg, #c41e3a 0%, #165b33 100%) !important;
        color: white !important;
        padding: 12px 18px !important;
        border-radius: 25px !important;
        white-space: nowrap !important;
        font-size: 14px !important;
        font-weight: 700 !important;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
        pointer-events: none !important;
        opacity: 0 !important;
        transition: opacity 0.3s ease !important;
        border: 2px solid white !important;
      }
      
      #chat-tooltip::after {
        content: '' !important;
        position: absolute !important;
        right: -10px !important;
        top: 50% !important;
        transform: translateY(-50%) !important;
        border: 5px solid transparent !important;
        border-left-color: white !important;
      }
      
      #leap-chat-cta-container:hover #chat-tooltip {
        opacity: 1 !important;
      }
      
      @keyframes pulse {
        0%, 100% { box-shadow: 0 8px 24px rgba(196, 30, 58, 0.5); }
        50% { box-shadow: 0 8px 32px rgba(196, 30, 58, 0.8), 0 0 0 8px rgba(196, 30, 58, 0.2); }
      }
      
      #leap-chat-cta {
        animation: pulse 2s infinite !important;
      }
    `;
    document.head.appendChild(style);
    console.log("‚úÖ Ultra-protective CSS injected");
  })();
  function forceHideStandardButtons() {
    try {
      var es = window.embeddedservice_bootstrap;
      if (es && es.utilAPI && typeof es.utilAPI.hideChatButton === "function") {
        es.utilAPI.hideChatButton();
      }
    } catch (e) {}
    
    var selectors = [
      '.embeddedMessagingConversationButton',
      '.embeddedServiceHelpButton',
      '.helpButtonEnabled',
      'button[aria-label*="Chat"]',
      'button[class*="embeddedMessaging"]',
      'button[class*="embeddedService"]',
      '.uiButton'
    ];
    
    selectors.forEach(function(selector) {
      try {
        var elements = document.querySelectorAll(selector);
        elements.forEach(function(el) {
          if (el && el.id !== 'leap-chat-cta' && el.id !== 'leap-chat-cta-container') {
            el.style.cssText = 'display:none!important;visibility:hidden!important;opacity:0!important;position:absolute!important;left:-99999px!important;';
            if (el.parentNode) {
              el.parentNode.removeChild(el);
            }
          }
        });
      } catch (e) {}
    });
  }
 
  function startCarousel(tooltipElement) {
    if (carouselInterval) clearInterval(carouselInterval);
    
    carouselInterval = setInterval(function() {
      currentMessageIndex = (currentMessageIndex + 1) % carouselMessages.length;
      if (tooltipElement && tooltipElement.isConnected) {
        tooltipElement.textContent = carouselMessages[currentMessageIndex];
      } else {
        stopCarousel();
      }
    }, 3000);
  }
  
  function stopCarousel() {
    if (carouselInterval) {
      clearInterval(carouselInterval);
      carouselInterval = null;
    }
  }
 
  function createRoundChatButton() {
    buttonCreationAttempts++;
    if (buttonCreationAttempts > MAX_CREATION_ATTEMPTS) {
      console.warn("‚ö†Ô∏è Max button creation attempts reached");
      return null;
    }
    
    // Container for button + tooltip
    var container = document.createElement("div");
    container.id = "leap-chat-cta-container";
    
    // Round button
    var btn = document.createElement("button");
    btn.id = "leap-chat-cta";
    btn.setAttribute("aria-label", "Open Christmas Chat");
    btn.innerHTML = `
      <svg width="32" height="32" viewBox="0 0 24 24" fill="none">
        <path d="M20 2H4C2.9 2 2 2.9 2 4V22L6 18H20C21.1 18 22 17.1 22 16V4C22 2.9 21.1 2 20 2Z" 
              fill="white" stroke="white" stroke-width="1.5"/>
        <circle cx="8" cy="10" r="1.5" fill="#c41e3a"/>
        <circle cx="12" cy="10" r="1.5" fill="#c41e3a"/>
        <circle cx="16" cy="10" r="1.5" fill="#c41e3a"/>
      </svg>
    `;
    
    // Tooltip
    var tooltipEl = document.createElement("div");
    tooltipEl.id = "chat-tooltip";
    tooltipEl.textContent = carouselMessages[0];
    
    btn.addEventListener("click", function(e) {
      e.preventDefault();
      e.stopPropagation();
      console.log("üéÖ Button clicked!");
      stopCarousel();
      chatIsOpen = true;
      container.classList.add('chat-open');
      
      var es = window.embeddedservice_bootstrap;
      if (es && es.utilAPI && typeof es.utilAPI.launchChat === "function") {
        es.utilAPI.launchChat().then(function() {
          console.log("‚úÖ Chat launched");
        }).catch(function(err) {
          console.error("‚ùå Launch error:", err);
          chatIsOpen = false;
          container.classList.remove('chat-open');
        });
      } else {
        console.warn("‚ö†Ô∏è Salesforce chat API not ready");
        chatIsOpen = false;
        container.classList.remove('chat-open');
      }
    });
    
    container.appendChild(tooltipEl);
    container.appendChild(btn);
    
    customButton = btn;
    tooltip = tooltipEl;
    
    return container;
  }
  
  function ensureButtonExists() {
    var container = document.getElementById('leap-chat-cta-container');
    var btn = document.getElementById('leap-chat-cta');
    
    // Check if button is in DOM and visible
    if (!container || !btn || !document.body.contains(container)) {
      console.log("üîß Button missing, recreating...");
      
      // Remove any existing instances first
      if (container && container.parentNode) {
        container.parentNode.removeChild(container);
      }
      
      // Create new button
      var newContainer = createRoundChatButton();
      if (newContainer) {
        document.body.appendChild(newContainer);
        console.log("‚úÖ Button recreated and added to DOM");
        
        if (!chatIsOpen && tooltip) {
          startCarousel(tooltip);
        }
      }
      return;
    }
    
    // Button exists, ensure it's visible (unless chat is open)
    if (!chatIsOpen) {
      container.classList.remove('chat-open');
      if (!carouselInterval && tooltip) {
        startCarousel(tooltip);
      }
    }
  }
  
  function showCustomButton() {
    chatIsOpen = false;
    ensureButtonExists();
    forceHideStandardButtons();
  }
 
  function hideCustomButton() {
    chatIsOpen = true;
    stopCarousel();
    var container = document.getElementById('leap-chat-cta-container');
    if (container) {
      container.classList.add('chat-open');
    }
    console.log("Custom button hidden (chat open)");
  }
 
  // Listen to Salesforce events
  var salesforceEvents = [
    "onEmbeddedMessagingReady",
    "onEmbeddedMessagingButtonCreated",
    "onEmbeddedMessagingWindowMaximized",
    "onEmbeddedMessagingWindowMinimized",
    "onEmbeddedMessagingConversationOpen"
  ];
  
  salesforceEvents.forEach(function(eventName) {
    window.addEventListener(eventName, function() {
      console.log("üì¢", eventName);
      forceHideStandardButtons();
      
      if (eventName === "onEmbeddedMessagingWindowMaximized") {
        hideCustomButton();
      } else if (eventName === "onEmbeddedMessagingWindowMinimized") {
        showCustomButton();
      } else {
        ensureButtonExists();
      }
    });
  });
 
  // Initialize immediately
  setTimeout(function() {
    ensureButtonExists();
    forceHideStandardButtons();
  }, 100);
  
  // AGGRESSIVE MONITORING - Check every 500ms
  setInterval(function() {
    ensureButtonExists();
    forceHideStandardButtons();
  }, 500);
  
  // DOM Protection - Watch for button removal
  var protectionObserver = new MutationObserver(function(mutations) {
    var buttonRemoved = false;
    
    for (var i = 0; i < mutations.length; i++) {
      var removedNodes = mutations[i].removedNodes;
      for (var j = 0; j < removedNodes.length; j++) {
        var node = removedNodes[j];
        if (node.id === 'leap-chat-cta-container' || node.id === 'leap-chat-cta') {
          buttonRemoved = true;
          console.warn("üö® Button was REMOVED! Restoring immediately...");
          break;
        }
      }
      
      // Hide any standard buttons that appear
      var addedNodes = mutations[i].addedNodes;
      for (var k = 0; k < addedNodes.length; k++) {
        var newNode = addedNodes[k];
        if (newNode.nodeType === 1 && newNode.id !== 'leap-chat-cta-container' && newNode.id !== 'leap-chat-cta') {
          if (newNode.classList && (
              newNode.classList.contains('embeddedMessagingConversationButton') ||
              newNode.classList.contains('embeddedServiceHelpButton') ||
              newNode.classList.contains('helpButtonEnabled')
          )) {
            forceHideStandardButtons();
          }
        }
      }
    }
    
    if (buttonRemoved) {
      setTimeout(ensureButtonExists, 50);
    }
  });
  
  protectionObserver.observe(document.body, { 
    childList: true, 
    subtree: true 
  });
  
  console.log("‚úÖ Ultra-protected Christmas chat button initialized!");
})();
  </script>
  <script type='text/javascript'
    src='https://leapmotor--dev01.sandbox.my.site.com/ESWLPMLeapmotor1760706603231/assets/js/bootstrap.min.js'
    onload='initEmbeddedMessaging()'></script>

</body>

</html>
