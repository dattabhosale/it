<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>LeapReplica - Electric Vehicles</title>
  <link rel="stylesheet" href="css/style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>

<body>
  <header class="site-header">
    <div class="container header-inner">
      <a href="/" class="brand">LeapReplica</a>
      <nav class="site-nav" id="site-nav">
        <a href="index.html">Home</a>
        <a href="products.html">Products</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
      </nav>
      <button class="nav-toggle" id="nav-toggle" aria-label="Toggle navigation">‚ò∞</button>
    </div>
  </header>

  <main>
    <section class="hero">
      <div class="container hero-inner">
        <div class="hero-copy">
          <h1>Electric mobility, designed for the future.</h1>
          <p>Explore a new generation of electric vehicles with long range, smart features, and bold design.</p>
          <p><a class="btn" href="products.html">View Models</a></p>
        </div>
        <div class="hero-media">
          <img src="assets/car-hero.jpg" alt="Electric car mockup">
        </div>
      </div>
    </section>

    <section class="highlights">
      <div class="container">
        <h2>Featured Models</h2>
        <div class="cards">
          <article class="card">
            <img src="assets/model-a.jpg" alt="Model A">
            <h3>Model A</h3>
            <p>Long range, fast charging, advanced driver assistance.</p>
            <p><a class="link" href="products.html">Learn more</a></p>
          </article>

          <article class="card">
            <img src="assets/model-b.jpg" alt="Model B">
            <h3>Model B</h3>
            <p>Urban performance with compact design and premium interior.</p>
            <p><a class="link" href="products.html">Learn more</a></p>
          </article>

          <article class="card">
            <img src="assets/model-c.jpg" alt="Model C">
            <h3>Model C</h3>
            <p>An intelligent SUV with family-friendly range and space.</p>
            <p><a class="link" href="products.html">Learn more</a></p>
          </article>
        </div>
      </div>
    </section>

    <section class="about-teaser">
      <div class="container">
        <h2>Our Vision</h2>
        <p>We build electric vehicles that are safe, sustainable and delightful to drive. Technology and design come
          together to make mobility more efficient and enjoyable.</p>
        <p><a class="btn ghost" href="about.html">Learn about us</a></p>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <div>¬© 2025 LeapReplica</div>
      <nav class="foot-nav">
        <a href="privacy.html">Privacy</a>
        <a href="contact.html">Contact</a>
      </nav>
    </div>
  </footer>

  <script src="js/main.js"></script>
  <script type='text/javascript'>
    function initEmbeddedMessaging() {
      try {
        embeddedservice_bootstrap.settings.language = 'es';
        embeddedservice_bootstrap.settings.displayHelpButton = true;
        embeddedservice_bootstrap.settings.defaultMinimizedText = "Chat with Leappy";
        embeddedservice_bootstrap.settings.disabledMinimizedText = "Leappy Offline";
        
        window.addEventListener("onEmbeddedMessagingReady", () => {
          embeddedservice_bootstrap.prechatAPI.setHiddenPrechatFields({
            Country: 'Spain',
            Language: 'es',
            CountryCode:'es'
          });
        });
        
        embeddedservice_bootstrap.init(
          '00DMA000003XnGM',
          'LPM_Leapmotor',
          'https://leapmotor--dev01.sandbox.my.site.com/ESWLPMLeapmotor1760706603231',
          {
            scrt2URL: 'https://leapmotor--dev01.sandbox.my.salesforce-scrt.com'
          }
        );
      } catch (err) {
        console.error('Error loading Embedded Messaging: ', err);
      }
    };
	(function () {
  console.log("Christmas chat button with carousel initialized");
 
  // Christmas-themed carousel messages
  var carouselMessages = [
    "üéÑ Ho Ho Ho! Chat with us! üéÖ",
    "‚ùÑÔ∏è Merry Chatmas! We're here! ‚òÉÔ∏è",
    "üéÅ Unwrap Support! Click here! üéÄ",
    "‚≠ê Holiday Help Available! ‚ú®",
    "üîî Jingle all the way to chat! üéÑ"
  ];
  var currentMessageIndex = 0;
  var carouselInterval = null;
  var customButtonCreated = false;
  // Inject CSS to hide standard button immediately
  (function injectHideCSS() {
    var style = document.createElement("style");
    style.id = "hide-standard-chat-button";
    style.textContent = `
      .embeddedMessagingFrame,
      .embeddedMessagingConversationButton,
      .embeddedServiceHelpButton,
      .embeddedServiceSidebar,
      .helpButtonEnabled,
      .uiButton.helpButtonEnabled {
        display: none !important;
        visibility: hidden !important;
        opacity: 0 !important;
        pointer-events: none !important;
      }
      
      @keyframes snowfall {
        0% { transform: translateY(-10px); opacity: 0; }
        50% { opacity: 1; }
        100% { transform: translateY(10px); opacity: 0; }
      }
      
      #leap-chat-cta::before {
        animation: snowfall 2s ease-in-out infinite;
      }
    `;
    document.head.appendChild(style);
  })();
  function hideStandardButton(es) {
    if (es && es.utilAPI && typeof es.utilAPI.hideChatButton === "function") {
      try {
        es.utilAPI.hideChatButton();
        console.log("Standard button hidden via API");
      } catch (e) {
        console.warn("Error calling hideChatButton()", e);
      }
    }
  }
 
  function startCarousel(textSpan) {
    if (carouselInterval) clearInterval(carouselInterval);
    
    carouselInterval = setInterval(function() {
      currentMessageIndex = (currentMessageIndex + 1) % carouselMessages.length;
      textSpan.textContent = carouselMessages[currentMessageIndex];
    }, 3000);
  }
  
  function stopCarousel() {
    if (carouselInterval) {
      clearInterval(carouselInterval);
      carouselInterval = null;
    }
  }
 
  function createChatIcon() {
    var icon = document.createElement("span");
    icon.innerHTML = `
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" style="margin-right: 8px;">
        <path d="M20 2H4C2.9 2 2 2.9 2 4V22L6 18H20C21.1 18 22 17.1 22 16V4C22 2.9 21.1 2 20 2Z" 
              fill="white" stroke="white" stroke-width="1.5"/>
        <circle cx="8" cy="10" r="1.5" fill="#c41e3a"/>
        <circle cx="12" cy="10" r="1.5" fill="#c41e3a"/>
        <circle cx="16" cy="10" r="1.5" fill="#c41e3a"/>
      </svg>
    `;
    return icon;
  }
 
  function showCustomCTA(es) {
    if (customButtonCreated) {
      var existing = document.getElementById("leap-chat-cta");
      if (existing) {
        existing.style.display = "inline-flex";
        var textSpan = existing.querySelector("span");
        if (textSpan) startCarousel(textSpan);
      }
      return;
    }
 
    var btn = document.createElement("button");
    btn.id = "leap-chat-cta";
 
    var icon = createChatIcon();
    var textSpan = document.createElement("span");
    textSpan.textContent = carouselMessages[0];
    
    btn.appendChild(icon);
    btn.appendChild(textSpan);
 
    // Styling
    btn.style.position = "fixed";
    btn.style.right = "24px";
    btn.style.bottom = "24px";
    btn.style.zIndex = "99999";
    btn.style.padding = "14px 24px";
    btn.style.fontSize = "16px";
    btn.style.fontWeight = "700";
    btn.style.borderRadius = "50px";
    btn.style.border = "3px solid #fff";
    btn.style.cursor = "pointer";
    btn.style.boxShadow = "0 8px 20px rgba(196, 30, 58, 0.4)";
    btn.style.background = "linear-gradient(135deg, #c41e3a 0%, #165b33 100%)";
    btn.style.color = "#ffffff";
    btn.style.display = "inline-flex";
    btn.style.alignItems = "center";
    btn.style.justifyContent = "center";
    btn.style.transition = "all 0.3s ease";
    btn.style.minWidth = "300px";
 
    btn.addEventListener("mouseenter", function () {
      btn.style.transform = "scale(1.08) rotate(2deg)";
      btn.style.boxShadow = "0 12px 30px rgba(196, 30, 58, 0.6)";
      stopCarousel();
    });
    
    btn.addEventListener("mouseleave", function () {
      btn.style.transform = "scale(1) rotate(0deg)";
      btn.style.boxShadow = "0 8px 20px rgba(196, 30, 58, 0.4)";
      startCarousel(textSpan);
    });
 
    btn.addEventListener("click", function () {
      stopCarousel();
      if (es && es.utilAPI && typeof es.utilAPI.launchChat === "function") {
        console.log("Launching chat from Christmas button");
        es.utilAPI.launchChat();
      }
    });
 
    document.body.appendChild(btn);
    customButtonCreated = true;
    hideStandardButton(es);
    startCarousel(textSpan);
    console.log("Christmas CTA created");
  }
 
  function hideCustomCTA() {
    var btn = document.getElementById("leap-chat-cta");
    if (btn) {
      btn.style.display = "none";
      stopCarousel();
    }
  }
 
  // Event listeners
  window.addEventListener("onEmbeddedMessagingButtonCreated", function () {
    console.log("Button created event");
    var es = window.embeddedservice_bootstrap;
    hideStandardButton(es);
    showCustomCTA(es);
  });
 
  window.addEventListener("onEmbeddedMessagingWindowMaximized", hideCustomCTA);
 
  window.addEventListener("onEmbeddedMessagingWindowMinimized", function () {
    var es = window.embeddedservice_bootstrap;
    hideStandardButton(es);
    showCustomCTA(es);
  });
 
  // Optimized initialization - reduced wait time
  function initCustomButton() {
    var es = window.embeddedservice_bootstrap;
    if (es && es.utilAPI) {
      console.log("utilAPI ready");
      hideStandardButton(es);
      showCustomCTA(es);
      return true;
    }
    return false;
  }
  
  // Try immediately
  if (!initCustomButton()) {
    // Retry with optimized timing
    var attempts = 0;
    var checkInterval = setInterval(function() {
      if (initCustomButton() || ++attempts > 20) {
        clearInterval(checkInterval);
      }
    }, 100);
  }
  
  // Lightweight observer for standard button
  var observer = new MutationObserver(function(mutations) {
    for (var i = 0; i < mutations.length; i++) {
      var nodes = mutations[i].addedNodes;
      for (var j = 0; j < nodes.length; j++) {
        var node = nodes[j];
        if (node.nodeType === 1 && node.classList) {
          var isStandardBtn = node.classList.contains('embeddedMessagingConversationButton') ||
                              node.classList.contains('embeddedServiceHelpButton') ||
                              node.classList.contains('helpButtonEnabled');
          if (isStandardBtn) {
            hideStandardButton(window.embeddedservice_bootstrap);
            break;
          }
        }
      }
    }
  });
  
  observer.observe(document.body, { childList: true, subtree: true });
})();
  </script>
  <script type='text/javascript'
    src='https://leapmotor--dev01.sandbox.my.site.com/ESWLPMLeapmotor1760706603231/assets/js/bootstrap.min.js'
    onload='initEmbeddedMessaging()'></script>

</body>

</html>
