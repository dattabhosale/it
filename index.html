<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>LeapReplica - Electric Vehicles</title>
  <link rel="stylesheet" href="css/style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>

<body>
  <header class="site-header">
    <div class="container header-inner">
      <a href="/" class="brand">LeapReplica</a>
      <nav class="site-nav" id="site-nav">
        <a href="index.html">Home</a>
        <a href="products.html">Products</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
      </nav>
      <button class="nav-toggle" id="nav-toggle" aria-label="Toggle navigation">â˜°</button>
    </div>
  </header>

  <main>
    <section class="hero">
      <div class="container hero-inner">
        <div class="hero-copy">
          <h1>Electric mobility, designed for the future.</h1>
          <p>Explore a new generation of electric vehicles with long range, smart features, and bold design.</p>
          <p><a class="btn" href="products.html">View Models</a></p>
        </div>
        <div class="hero-media">
          <img src="assets/car-hero.jpg" alt="Electric car mockup">
        </div>
      </div>
    </section>

    <section class="highlights">
      <div class="container">
        <h2>Featured Models</h2>
        <div class="cards">
          <article class="card">
            <img src="assets/model-a.jpg" alt="Model A">
            <h3>Model A</h3>
            <p>Long range, fast charging, advanced driver assistance.</p>
            <p><a class="link" href="products.html">Learn more</a></p>
          </article>

          <article class="card">
            <img src="assets/model-b.jpg" alt="Model B">
            <h3>Model B</h3>
            <p>Urban performance with compact design and premium interior.</p>
            <p><a class="link" href="products.html">Learn more</a></p>
          </article>

          <article class="card">
            <img src="assets/model-c.jpg" alt="Model C">
            <h3>Model C</h3>
            <p>An intelligent SUV with family-friendly range and space.</p>
            <p><a class="link" href="products.html">Learn more</a></p>
          </article>
        </div>
      </div>
    </section>

    <section class="about-teaser">
      <div class="container">
        <h2>Our Vision</h2>
        <p>We build electric vehicles that are safe, sustainable and delightful to drive. Technology and design come
          together to make mobility more efficient and enjoyable.</p>
        <p><a class="btn ghost" href="about.html">Learn about us</a></p>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <div>Â© 2025 LeapReplica</div>
      <nav class="foot-nav">
        <a href="privacy.html">Privacy</a>
        <a href="contact.html">Contact</a>
      </nav>
    </div>
  </footer>
<script type='text/javascript'>
    function initEmbeddedMessaging() {
      try {
        embeddedservice_bootstrap.settings.language = 'es'; // For example, enter 'en' or 'en-US'
        // Personalizzazione del pulsante
        embeddedservice_bootstrap.settings.displayHelpButton = true;
        embeddedservice_bootstrap.settings.defaultMinimizedText = "Chat with Leappy";
        embeddedservice_bootstrap.settings.disabledMinimizedText = "Leappy Offline";
        
        window.addEventListener("onEmbeddedMessagingReady", () => {
          embeddedservice_bootstrap.prechatAPI.setHiddenPrechatFields({
            Country: 'Spain',
            Language: 'es',
            CountryCode:'es'
          });
        });
        embeddedservice_bootstrap.init(
          '00DMA000003XnGM',
          'LPM_Leapmotor',
          'https://leapmotor--dev01.sandbox.my.site.com/ESWLPMLeapmotor1760706603231',
          {
            scrt2URL: 'https://leapmotor--dev01.sandbox.my.salesforce-scrt.com'
          }
        );
      } catch (err) {
        console.error('Error loading Embedded Messaging: ', err);
      }
    };
	(function () {
  console.log("Test custom chat button with carousel effect");
 
  // Christmas-themed carousel messages that will rotate
  const carouselMessages = [
    "ðŸŽ„ Chat with us this Holiday Season!",
    "ðŸŽ… Ho Ho Ho! Need Help?",
    "â›„ Winter Wishes - Chat Now!",
    "ðŸŽ Gift yourself great support!",
    "â„ï¸ Let it Snow! Let's Chat!",
    "ðŸ”” Jingle All the Way to Support!",
    "â­ Merry Chatmas!"
  ];
  
  let currentMessageIndex = 0;
  let carouselInterval = null;
  let buttonObserver = null;
  function hideStandardButton(es) {
    if (es && es.utilAPI && typeof es.utilAPI.hideChatButton === "function") {
      try {
        es.utilAPI.hideChatButton();
        console.log("hideChatButton() called");
      } catch (e) {
        console.warn("Error calling hideChatButton()", e);
      }
    }
    
    // Also try to hide by finding and hiding the button element directly
    // Be very specific to only target Salesforce buttons, not our custom button
    try {
      // Target Salesforce-specific selectors
      var salesforceSelectors = [
        '[id*="embedded-messaging"]:not(#leap-chat-cta)',
        '[class*="embeddedMessaging"]:not(#leap-chat-cta)',
        '[class*="slds-chat"]:not(#leap-chat-cta)',
        '[class*="embeddedServiceHelpButton"]:not(#leap-chat-cta)',
        'button[class*="uiButton"][class*="helpButton"]:not(#leap-chat-cta)'
      ];
      
      salesforceSelectors.forEach(function(selector) {
        try {
          var elements = document.querySelectorAll(selector);
          elements.forEach(function(btn) {
            // Double-check it's not our custom button
            if (btn.id !== "leap-chat-cta" && btn.id !== "chat-button-styles") {
              btn.style.display = "none !important";
              btn.style.visibility = "hidden !important";
              btn.style.opacity = "0 !important";
              btn.style.pointerEvents = "none !important";
            }
          });
        } catch (e) {
          // Ignore selector errors
        }
      });
    } catch (e) {
      console.warn("Error hiding button elements", e);
    }
  }
  function startButtonObserver(es) {
    // Stop existing observer if any
    if (buttonObserver) {
      buttonObserver.disconnect();
    }
    let throttleTimeout = null;
    
    // Create a MutationObserver to watch for standard button appearing
    buttonObserver = new MutationObserver(function(mutations) {
      // Throttle the hideStandardButton calls to avoid excessive execution
      if (!throttleTimeout) {
        throttleTimeout = setTimeout(function() {
          // Make sure our custom button still exists and is visible
          var customBtn = document.getElementById("leap-chat-cta");
          if (customBtn) {
            hideStandardButton(es);
          }
          throttleTimeout = null;
        }, 100); // Wait 100ms between hide attempts
      }
    });
    // Start observing the document body for changes
    buttonObserver.observe(document.body, {
      childList: true,
      subtree: true,
      attributes: true,
      attributeFilter: ['style', 'class', 'display']
    });
    
    console.log("Button observer started");
  }
  function stopButtonObserver() {
    if (buttonObserver) {
      buttonObserver.disconnect();
      buttonObserver = null;
      console.log("Button observer stopped");
    }
  }
  function startCarousel(btn) {
    // Clear any existing interval
    if (carouselInterval) {
      clearInterval(carouselInterval);
    }
    
    // Start the carousel animation
    carouselInterval = setInterval(() => {
      // Fade out
      btn.style.opacity = "0";
      btn.style.transform = "scale(0.95) translateY(5px)";
      
      setTimeout(() => {
        // Change message
        currentMessageIndex = (currentMessageIndex + 1) % carouselMessages.length;
        btn.textContent = carouselMessages[currentMessageIndex];
        
        // Fade in
        btn.style.opacity = "1";
        btn.style.transform = "scale(1) translateY(0)";
      }, 300);
    }, 3500); // Change message every 3.5 seconds
  }
  function stopCarousel() {
    if (carouselInterval) {
      clearInterval(carouselInterval);
      carouselInterval = null;
    }
  }
 
  function showCustomCTA(es) {
    if (!es || !es.utilAPI) {
      console.warn("utilAPI not available");
      return;
    }
 
    var existing = document.getElementById("leap-chat-cta");
    if (existing) {
      existing.style.display = "inline-flex";
      hideStandardButton(es);
      startCarousel(existing);
      startButtonObserver(es); // Start observing for standard button
      console.log("Custom CTA shown again");
      return;
    }
 
    var btn = document.createElement("button");
    btn.id = "leap-chat-cta";
    btn.textContent = carouselMessages[0];
 
    // Make button MUCH larger to cover standard button
    btn.style.position = "fixed";
    btn.style.right = "20px";
    btn.style.bottom = "20px";
    btn.style.zIndex = "999999"; // Higher z-index to ensure it's on top
 
    btn.style.minWidth = "200px";
    btn.style.minHeight = "80px";
    btn.style.padding = "20px 32px";
    btn.style.fontSize = "18px";
    btn.style.fontWeight = "700";
    btn.style.borderRadius = "50px";
    btn.style.border = "3px solid #FFD700"; // Gold border for Christmas
    btn.style.cursor = "pointer";
    btn.style.boxShadow = "0 10px 30px rgba(220, 38, 38, 0.5), 0 0 20px rgba(34, 197, 94, 0.3)";
    btn.style.color = "#ffffff";
    btn.style.display = "inline-flex";
    btn.style.alignItems = "center";
    btn.style.justifyContent = "center";
    btn.style.transition = "all 0.3s cubic-bezier(0.4, 0, 0.2, 1)";
    btn.style.opacity = "1";
    btn.style.textAlign = "center";
    btn.style.lineHeight = "1.4";
    
    // Christmas red and green gradient
    btn.style.background = "linear-gradient(135deg, #dc2626 0%, #16a34a 50%, #dc2626 100%)";
    btn.style.backgroundSize = "200% 200%";
    
    // Add pulse animation
    btn.style.animation = "christmasGlow 3s ease-in-out infinite, backgroundShift 8s ease infinite";
    // Add CSS animation keyframes with Christmas theme
    if (!document.getElementById("chat-button-styles")) {
      var style = document.createElement("style");
      style.id = "chat-button-styles";
      style.textContent = `
        @keyframes christmasGlow {
          0%, 100% {
            box-shadow: 0 10px 30px rgba(220, 38, 38, 0.5), 0 0 20px rgba(34, 197, 94, 0.3);
            transform: scale(1);
          }
          50% {
            box-shadow: 0 15px 40px rgba(220, 38, 38, 0.7), 0 0 30px rgba(34, 197, 94, 0.5), 0 0 0 10px rgba(255, 215, 0, 0.2);
            transform: scale(1.02);
          }
        }
        
        @keyframes backgroundShift {
          0% {
            background-position: 0% 50%;
          }
          50% {
            background-position: 100% 50%;
          }
          100% {
            background-position: 0% 50%;
          }
        }
        
        @keyframes slideIn {
          from {
            transform: translateX(150%) rotate(10deg);
            opacity: 0;
          }
          to {
            transform: translateX(0) rotate(0deg);
            opacity: 1;
          }
        }
        
        @keyframes jingleShake {
          0%, 100% { transform: rotate(0deg); }
          10% { transform: rotate(-3deg); }
          20% { transform: rotate(3deg); }
          30% { transform: rotate(-3deg); }
          40% { transform: rotate(3deg); }
          50% { transform: rotate(0deg); }
        }
      `;
      document.head.appendChild(style);
    }
    
    // Add initial slide-in animation
    btn.style.animation = "slideIn 0.6s ease-out, christmasGlow 3s ease-in-out 0.6s infinite, backgroundShift 8s ease 0.6s infinite";
 
    btn.addEventListener("mouseenter", function () {
      btn.style.transform = "scale(1.08) translateY(-3px)";
      btn.style.boxShadow = "0 15px 40px rgba(220, 38, 38, 0.7), 0 0 30px rgba(34, 197, 94, 0.6)";
      btn.style.animation = "jingleShake 0.5s ease, christmasGlow 3s ease-in-out infinite, backgroundShift 8s ease infinite";
      stopCarousel();
    });
    btn.addEventListener("mouseleave", function () {
      btn.style.transform = "scale(1) translateY(0)";
      btn.style.boxShadow = "0 10px 30px rgba(220, 38, 38, 0.5), 0 0 20px rgba(34, 197, 94, 0.3)";
      btn.style.animation = "christmasGlow 3s ease-in-out infinite, backgroundShift 8s ease infinite";
      startCarousel(btn);
    });
 
    btn.addEventListener("click", function () {
      stopCarousel();
      if (typeof es.utilAPI.launchChat === "function") {
        console.log("launchChat() from CTA");
        var r = es.utilAPI.launchChat();
        if (r && typeof r.then === "function") {
          r.then(function () {
            console.log("Chat launched (Promise resolved)");
          }).catch(function (err) {
            console.error("Error launching chat", err);
          });
        }
      } else {
        console.warn("launchChat() not available");
      }
    });
 
    document.body.appendChild(btn);
    hideStandardButton(es);
    startCarousel(btn);
    startButtonObserver(es); // Start observing for standard button
    console.log("Custom CTA created with Christmas carousel effect");
  }
 
  function hideCustomCTA() {
    var btn = document.getElementById("leap-chat-cta");
    if (btn) {
      btn.style.display = "none";
      stopCarousel();
      stopButtonObserver(); // Stop observing when custom button is hidden
      console.log("Custom CTA hidden");
    }
  }
 
  window.addEventListener("onEmbeddedMessagingButtonCreated", function () {
    console.log("onEmbeddedMessagingButtonCreated fired");
    var es = window.embeddedservice_bootstrap;
    if (es) {
      showCustomCTA(es);
    }
  });
 
  window.addEventListener("onEmbeddedMessagingWindowMaximized", function () {
    console.log("onEmbeddedMessagingWindowMaximized fired");
    hideCustomCTA();
  });
 
  window.addEventListener("onEmbeddedMessagingWindowMinimized", function () {
    console.log("onEmbeddedMessagingWindowMinimized fired");
    var es = window.embeddedservice_bootstrap;
    if (es) {
      hideStandardButton(es);
      showCustomCTA(es); // This will also start the observer
    }
  });
 
  function waitForES(maxAttempts, intervalMs) {
    var attempts = 0;
    (function check() {
      attempts++;
      var es = window.embeddedservice_bootstrap;
      if (es && es.utilAPI) {
        console.log("utilAPI ready (initial)");
        showCustomCTA(es);
        return;
      }
      if (attempts >= maxAttempts) {
        console.warn("utilAPI not found after", attempts, "attempts");
        return;
      }
      setTimeout(check, intervalMs);
    })();
  }
 
  if (document.readyState === "complete" || document.readyState === "interactive") {
    waitForES(50, 200);
  } else {
    window.addEventListener("DOMContentLoaded", function () {
      waitForES(50, 200);
    });
  }
})();
  </script>
  <script type='text/javascript'
    src='https://leapmotor--dev01.sandbox.my.site.com/ESWLPMLeapmotor1760706603231/assets/js/bootstrap.min.js'
    onload='initEmbeddedMessaging()'></script>

</body>

</html>
